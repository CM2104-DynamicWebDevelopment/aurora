<!-- 
//Project: Aurora Spotter
//Group: DM Web Dev Team
//TMs: Maya Bonaz, Louise Findlay, Miriam Wojcik, Brandon Reid
//Date: 2/3/2020
//Home page -->


<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aurora</title>

    <!-- CSS Stylesheets, Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css?family=Hind|Montserrat:300,400,600&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/59dd3e37d5.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/backgrounds/index-mob.css">
    <!--Leaflet map css files-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" crossorigin="" />

    <!-- JS Scripts and jQuery -->
    <script src="js/vendor/jquery-1.11.2.min.js"></script>
    <script src="js/main.js"></script>
    <!--Leaflet map script (edit note: must be included after the leaflet css)-->
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js" integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew==" crossorigin=""></script>
</head>

<body onload="hideElements(), loadMap()">
    <header>
        <!-- Default Header -->
        <nav class="icon">
            <div class="flex-container">
                <a id="title" href="#">
                    <h1>AURORA</h1>
                </a>
                <i class="fas fa-bars"></i>
            </div>
        </nav>

        <!-- Hamburger Menu -->
        <nav id="menu">
            <div class="flex-container">
                <h1>Menu</h1>
                <i class="fas fa-times"></i>
            </div>
            <div class="flex-column">
                <a href="index.html">
                    <h2>Home</h2>
                </a>
                <a href="login.html" class="login-nav">
                    <h2>Log In</h2>
                </a>
                <a href="signup.html" class="login-nav">
                    <h2>Sign Up</h2>
                </a>
                <a href="profile.html" class="logout-nav">
                    <h2>Profile</h2>
                </a>
                <a href="settings.html" class="logout-nav">
                    <h2>Settings</h2>
                </a>
                <a href="index.html" class="logout-nav">
                    <h2 onclick="signout();">Log out</h2>
                </a>
            </div>
        </nav>
    </header>
    <main>
        <section id="welcome">
            <h2>Follow the Northern Lights</h2>

            <!-- Record Observation -->
            <div id="new_entry">
                <p>Do you have an Aurora in front of your eyes?</p>
                <p>Click the button below to share your location!</p>
                <button id="btn_add_loc" onclick="recordClicked()">Record Observation</button>
            </div>

            <!-- New entry pop up -->
            <div id="new-popup">
                <p id="popup-msg"></p>
                <div class="btn-flex-container">
                    <button id="popup-cancel" onclick="cancelLocation()">Cancel</button>
                    <button id="popup-save" onclick="addLocation()">Save</button>
                </div>
            </div>

            <!-- Display error msg if user tries to add observation when not logged in -->
            <div id="record-not-logged">
                <p id="login-prompt-msg">You need to be <a href="login.html" id='login-prompt'> Signed In </a> to add observation</p>
                <div class="btn-flex-container">
                    <button id="login-prompt-close" onclick="closeLoginPrompt()">Close</button>
                </div>
            </div>
            <!-- Aurora Map -->
            <div id="map">
                <!--leaflet map-->
                <div id="mapid"></div>
                <!--call map script-->
                <script src="js/map.js"></script>

            </div>

            <!-- Weather Forecast -->
            <div id="home-container" class="flex-container">
                <div id="weather">
                    <div class="notification"> </div>
                    <div class="weather-container">
                        <h4 class="black text-center">Weather Forecast</h4>
                        <div class="weather-location">
                            <p>-</p>
                        </div>
                        <div class="weather-icon">
                            <img src="img/weather-icons/unknown.png" alt="">
                        </div>
                        <div class="temperature">
                            <p>- °<span>C</span></p>
                        </div>
                        <div class="temperature-description">
                            <p> - </p>
                        </div>
                    </div>
                </div>

                <!-- Aurora Status -->
                <div id="aurora_status">
                    <script>
                        //link to aurora watch status
                        var mobile_content = '<iframe id ="status-frame" scrolling="no" allowtransparency="true" src="http://aurorawatch.lancs.ac.uk/external/status_text"></iframe>';
                        //link to aurora watch status and solar activity plots
                        var other_devices = '<div class = "frame-cont"><iframe id="plot-frame" scrolling="no" allowtransparency="true" src="http://aurorawatch.lancs.ac.uk/external/rolling_status_text"></iframe></div>';

                        //function to load an appriopriate content
                        function loadStatus() {
                            //on mobile devices display only the aurora watch uk alert status
                            if (window.innerWidth < 1280) {
                                document.getElementById('aurora_status').innerHTML = mobile_content;
                            }
                            //on bigger screens display the plots provided by aurora watch uk
                            else {
                                document.getElementById('aurora_status').innerHTML = other_devices;
                            }
                        }
                        loadStatus();

                        //detect change of the screen size and reload the appropriate element
                        window.addEventListener('resize', loadStatus);
                    </script>
                </div>
            </div>
        </section>

        <!-- Text about project and tips for seeing Aurora -->
        <section id="about-us">
            <h3>ABOUT US</h3>
            <div id="about-us-text">
                <p>
                    Aurora is a web application that helps to find the best locations for observing the Aurora Borealis in Aberdeen and Aberdeenshire region.
                    It provides a map for tagging the locations where Aurora was spotted.
                    The OpenWeatherMap API provides the weather forecast, and AuroraWatch UK API delivers an Aurora forecast diagram of hourly geomagnetic activity index.
                    Aurora forecast shows the likelihood of seeing Aurora in the UK.
                    The weather forecast, together with the Aurora forecast, help users to decide if the day and time are suitable for viewing Aurora.
                </p>
            </div>
        </section>

        <section id="tips">
            <h3>TIPS</h3>
            <div>
                <p class="bold">Time of the year:</p>

                <p>Aurora phenomenon is visible between late August and early April. Months from November to February are a great time to witness the aurora light shows.
                </p>

                <p class="bold">Aurora Forecast:</p>
                <p>Natural occurrence of the aurora depends on the collision of solar wind and gaseous particles of the Earth’s atmosphere. High geomagnetic activity on the aurora forecast indicates, there is a good chance to see the aurora on that given day/time.
                </p>
                <p class="bold">Weather:</p>
                <p>Carefully check the weather forecast before going out for aurora hunting. Cloudy and rainy weather forecast minimises the chances of seeing the aurora. The clear night sky offers the best probability of experiencing the aurora.
                </p>
                <p class="bold">Location:</p>
                <p>Aurora occurs near the magnetic poles of the Earth.
                    Check the locations tagged on the map. The locations with the most tags are the best spots to see aurora displays.
                </p>
                <p class="bold">Light Pollution:</p>
                <p>Light pollution from the city streets and buildings will make it difficult to fully experience the aurora. The best places to see the aurora are usually away from the city lights.</p>
                <p> Additionally, the light from a full moon also causes problems as it brightens up the skies. Therefore, the timing of the outing is important too.</p>
            </div>
        </section>
    </main>
    <script src="js/weather.js"></script>
</body>
</html>